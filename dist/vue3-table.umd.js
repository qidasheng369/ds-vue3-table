(function(e,f){typeof exports=="object"&&typeof module!="undefined"?module.exports=f(require("vue")):typeof define=="function"&&define.amd?define(["vue"],f):(e=typeof globalThis!="undefined"?globalThis:e||self,e["ds-vue3-table"]=f(e.Vue))})(this,function(e){"use strict";const f=e.defineComponent({name:"MultistageColumn"}),w=e.defineComponent({...f,props:{column:{type:Object,required:!0}},setup(n){return(s,p)=>{const c=e.resolveComponent("multistage-column",!0),d=e.resolveComponent("el-table-column");return e.openBlock(),e.createBlock(d,e.mergeProps({label:n.column.label,prop:n.column.label},n.column),{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.column.children,o=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[o.children&&o.children.length?(e.openBlock(),e.createBlock(c,{key:o.prop,column:o},null,8,["column"])):(e.openBlock(),e.createBlock(d,e.mergeProps({key:o.id,ref_for:!0},o,{"show-overflow-tooltip":""}),e.createSlots({_:2},[o.slotName?{name:"default",fn:e.withCtx(a=>[e.renderSlot(s.$slots,o.slotName,{data:a})]),key:"0"}:void 0]),1040))],64))),256))]),_:3},16,["label","prop"])}}}),y=e.defineComponent({__name:"Pagination",props:{pageConfig:{type:Object,default:()=>({})}},setup(n){return(s,p)=>{const c=e.resolveComponent("el-pagination");return e.openBlock(),e.createBlock(c,e.normalizeProps(e.guardReactiveProps(n.pageConfig)),null,16)}}});var X="",b=(n,s)=>{const p=n.__vccOpts||n;for(const[c,d]of s)p[c]=d;return p};const B={class:"common-table"},S={class:"multi-menu"},x={style:{"font-size":"12px"}},E={key:1,class:"pagination"},N={name:"ds-vue3-table"},V=e.defineComponent({...N,props:{tableData:{type:Array,default:()=>[]},tableConfig:{type:Object,default:()=>{}},columns:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},showPagination:{type:Boolean,default:!0},paginationConfig:{type:Object,default:()=>{}}},emits:["pageSizeChange","currentPageChange","multiSelection"],setup(n,{expose:s,emit:p}){const c=n,d=p,o=e.reactive({selection:[]}),a=e.ref(null),r=e.computed(()=>{let t={};const i={label:"\u64CD\u4F5C",minWidth:80,fixed:"right"};return c.tableConfig.handlerConfig&&Object.assign(i,c.tableConfig.handlerConfig),t=Object.assign({rowKey:"id",showSeletion:!1,showIndexColumn:!1,indexLabel:"\u5E8F\u53F7",isCheckMemory:!1,showHandler:!1,showExpand:!1,showAppend:!1,appendLabel:"\u81EA\u5B9A\u4E49"},c.tableConfig),t.handlerConfig=i,t}),h=e.computed(()=>Object.assign({total:0,current:1,pageSize:10,pageSizes:[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper"},c.paginationConfig));function z(t){d("pageSizeChange",t)}function j(t){d("currentPageChange",t)}function _(){o.selection=[],a.value.clearSelection()}function F(t){o.selection=t,d("multiSelection",t)}function $(t){return t+(h.value.current-1)*h.value.pageSize+1}function D(t,i){a.value.toggleRowSelection(t,i)}function R(){a.value.toggleAllSelection()}function A(t,i){a.value.toggleRowExpansion(t,i)}function L(t){a.value.setCurrentRow(t)}function O(){a.value.clearSort()}function I(t){a.value.clearFilter(t)}function T(){a.value.doLayout()}function K(t,i){a.value.sort(t,i)}return s({clearSelection:_,toggleRowSelection:D,toggleAllSelection:R,toggleRowExpansion:A,setCurrentRow:L,clearSort:O,clearFilter:I,doLayout:T,sort:K}),(t,i)=>{const k=e.resolveComponent("el-divider"),M=e.resolveComponent("el-row"),m=e.resolveComponent("el-table-column"),q=e.resolveComponent("el-table"),H=e.resolveDirective("loading");return e.openBlock(),e.createElementBlock("div",B,[r.value.showSeletion&&o.selection.length?(e.openBlock(),e.createBlock(M,{key:0,justify:"space-between",style:{"align-items":"center",margin:"10px 0"}},{default:e.withCtx(()=>[e.createElementVNode("div",S,[e.createElementVNode("span",x,"\u5DF2\u9009\u4E2D"+e.toDisplayString(o.selection.length)+"\u9879",1),e.createVNode(k,{direction:"vertical"}),e.renderSlot(t.$slots,"multiSelectMenu",{selection:o.selection},void 0,!0)]),e.createElementVNode("a",{class:"close",onClick:_})]),_:3})):e.createCommentVNode("",!0),e.withDirectives((e.openBlock(),e.createBlock(q,e.mergeProps({ref_key:"commonTableRef",ref:a,data:n.tableData},t.$attrs,{rowKey:r.value.rowKey,onSelectionChange:F}),{default:e.withCtx(()=>[r.value.showExpand?(e.openBlock(),e.createBlock(m,{key:0,type:"expand"},{default:e.withCtx(l=>[e.renderSlot(t.$slots,"expand",{props:l},void 0,!0)]),_:3})):e.createCommentVNode("",!0),r.value.showSeletion?(e.openBlock(),e.createBlock(m,{key:1,type:"selection",width:"60","reserve-selection":r.value.isCheckMemory,align:"center"},null,8,["reserve-selection"])):e.createCommentVNode("",!0),r.value.showIndexColumn?(e.openBlock(),e.createBlock(m,{key:2,type:"index",index:$,width:"60"},{header:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(r.value.indexLabel),1)]),_:1})):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.columns,l=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[l.children&&l.children.length?(e.openBlock(),e.createBlock(w,{key:l.prop,column:l},null,8,["column"])):(e.openBlock(),e.createBlock(m,e.mergeProps({key:l.id,ref_for:!0},l,{"show-overflow-tooltip":""}),e.createSlots({_:2},[l.slotName?{name:"default",fn:e.withCtx(W=>[e.renderSlot(t.$slots,l.slotName,{scope:W},void 0,!0)]),key:"0"}:void 0]),1040))],64))),256)),r.value.showHandler?(e.openBlock(),e.createBlock(m,e.normalizeProps(e.mergeProps({key:3},r.value.handlerConfig)),{default:e.withCtx(l=>[e.renderSlot(t.$slots,"handler",{scope:l},void 0,!0)]),_:3},16)):e.createCommentVNode("",!0),r.value.showAppend?(e.openBlock(),e.createBlock(m,{key:4,type:"append",label:r.value.appendLabel},{default:e.withCtx(l=>[e.renderSlot(t.$slots,"append",{props:l},void 0,!0)]),_:3},8,["label"])):e.createCommentVNode("",!0)]),_:3},16,["data","rowKey"])),[[H,n.loading]]),n.showPagination?(e.openBlock(),e.createElementBlock("div",E,[e.createVNode(y,{pageConfig:h.value,onSizeChange:z,onCurrentChange:j},null,8,["pageConfig"])])):e.createCommentVNode("",!0)])}}});var g=b(V,[["__scopeId","data-v-1f26fa16"]]);g.install=function(n){n.component(g.name,g)};const C=[g],u=function(n){u.installed||(u.installed=!0,C.map(s=>{n.component(s.name,s)}))};typeof window!="undefined"&&window.Vue&&u(window.Vue);var P={install:u,...C};return P});
